<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>canvas 三角函数学习应用</title>
</head>
<body>
    <div class="container">
        <canvas id="canvas"></canvas>
    </div>
</body>
</html>

<style>
    html, body{
    width: 100%;
    height: 100%;
    margin: 0;
    padding: 0;
    overflow: hidden;
    }
    .container{
    width: 100%;
    height: 100%;
    margin: 0;
    padding: 0;
    background-color: #FFFFFF;
    }
</style>

<script type="text/javascript" src="arrow.js"></script>
<script stype="text/javascript" src="../util/util.js"></script>

<script type="text/javascript">
window.onload = function(){
           var canvas = document.getElementById("canvas");
           console.log(canvas);
           var context = canvas.getContext("2d");
           var mouse = util.captureMouse(canvas);
           
           var arrow = new Arrow();
           arrow.x = canvas.width/2;
           arrow.y = canvas.height/2;
           
           var angle = 0, speed = 2;
           
           (function drawFrame(){
               window.requestAnimationFrame(drawFrame, canvas);
               context.clearRect(0,0,canvas.width,canvas.height);
               
               var dx = mouse.x - arrow.x;
               var dy = mouse.y - arrow.y;
               
               angle = Math.atan2(dy, dx);
               arrow.rotation = angle;//angle默认为弧度
               
               var vx = Math.cos(angle)*speed;
               var vy = Math.sin(angle)*speed;
               
               arrow.x += vx;
               arrow.y += vy;
               
               arrow.draw(context);
           }());
           
       }
</script>